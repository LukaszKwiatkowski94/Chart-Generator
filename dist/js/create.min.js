"use strict";var list=$("#list__container"),items=[],ctxCreate=$("#createChart"),myChartCreate=new Chart(ctxCreate,{});function saveItems(){try{localStorage.setItem("items",JSON.stringify(items)),reloadChart(),showOrHideElements()}catch(e){console.error(e)}}function loadItems(){try{(localStorage.getItem("items")?(items=JSON.parse(localStorage.getItem("items")),prepareHTML_LoadedItems(),reloadChart):(items=[],showOrHideElements))()}catch(e){console.error(e)}}function prepareHTML_LoadedItems(){try{list.html(""),items.forEach(function(e){var a=e.id,t=document.createElement("div"),n=(t.setAttribute("data-id",a),t.classList.add("data__list-item"),document.createElement("div")),i=(n.classList.add("data__list-item-name"),n.classList.add("data__list-item-setting"),document.createElement("input")),r=(i.setAttribute("type","text"),i.setAttribute("value",e.name),i.addEventListener("change",function(){var e=items.findIndex(function(e){return e.id===a});items[e].name=i.value,saveItems()}),document.createElement("label")),r=(r.innerText="Name",r.setAttribute("for",a),n.appendChild(r),n.appendChild(i),document.createElement("div")),s=(r.classList.add("data__list-item-color"),r.classList.add("data__list-item-setting"),document.createElement("input")),d=(s.setAttribute("type","color"),s.setAttribute("value",e.color),s.addEventListener("change",function(){var e=items.findIndex(function(e){return e.id===a});items[e].color=s.value,saveItems()}),document.createElement("label")),d=(d.innerText="Color",d.setAttribute("for",a),r.appendChild(d),r.appendChild(s),document.createElement("div")),l=(d.classList.add("data__list-item-value"),d.classList.add("data__list-item-setting"),document.createElement("input")),e=(l.setAttribute("type","number"),l.setAttribute("value",e.value),l.addEventListener("change",function(){var e=items.findIndex(function(e){return e.id===a});items[e].value=l.value,saveItems()}),document.createElement("label")),e=(e.innerText="Value",e.setAttribute("for",a),d.appendChild(e),d.appendChild(l),document.createElement("div")),o=(e.classList.add("data__list-item-buttons"),document.createElement("button")),o=(o.classList.add("data__list-item-remove"),o.innerText="X",o.addEventListener("click",function(){items=items.filter(function(e){return e.id!==a}),saveItems(),prepareHTML_LoadedItems()}),e.appendChild(o),document.createElement("button")),o=(o.classList.add("data__list-item-up"),o.innerText="<<",o.addEventListener("click",function(){var e,t=items.findIndex(function(e){return e.id===a});0<t&&(e=items[t-1],items[t-1]=items[t],items[t]=e,saveItems(),prepareHTML_LoadedItems())}),e.appendChild(o),document.createElement("button"));o.classList.add("data__list-item-down"),o.innerText=">>",o.addEventListener("click",function(){var e,t=items.findIndex(function(e){return e.id===a});t<items.length-1&&(e=items[t+1],items[t+1]=items[t],items[t]=e,saveItems(),prepareHTML_LoadedItems())}),e.appendChild(o),t.appendChild(n),t.appendChild(r),t.appendChild(d),t.appendChild(e),list.append(t)})}catch(e){console.error(e)}}function clearItems(){localStorage.removeItem("items"),items=[],list.html(""),reloadChart(),showOrHideElements()}function reloadChart(){myChartCreate&&myChartCreate.destroy();var e=items.map(function(e){return{label:e.name,data:[e.value],backgroundColor:e.color,borderColor:e.color}});myChartCreate=new Chart(ctxCreate,{type:"bar",data:{labels:[""],datasets:e}})}function showOrHideElements(){try{console.log(items.length),0==items.length?($("#clear__btn").hide(),$("#asc__btn").hide(),$("#desc__btn").hide(),$("#download__btn").hide(),$("#createChart").hide()):($("#clear__btn").show(),$("#asc__btn").show(),$("#desc__btn").show(),$("#download__btn").show(),$("#createChart").show())}catch(e){console.error(e)}}$("#create__btn").click(function(){var e=Math.floor(16777215*Math.random()).toString(16),t=Math.random().toString(36).substring(7);items.push({id:t,name:"New item",color:"#"+e,value:0}),prepareHTML_LoadedItems(),saveItems()}),$("#clear__btn").click(function(){clearItems()}),$("#asc__btn").click(function(){items.sort(function(e,t){return e.value-t.value}),saveItems(),prepareHTML_LoadedItems()}),$("#desc__btn").click(function(){items.sort(function(e,t){return t.value-e.value}),saveItems(),prepareHTML_LoadedItems()}),$("#download__btn").click(function(){var e=document.getElementById("createChart").toDataURL("image/png"),t=document.createElement("a");t.href=e,t.download="chart.png",t.click()}),loadItems();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNyZWF0ZS5qcyJdLCJuYW1lcyI6WyJsaXN0IiwiJCIsImN0eENyZWF0ZSIsIm15Q2hhcnRDcmVhdGUiLCJDaGFydCIsInNhdmVJdGVtcyIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwiaXRlbXMiLCJyZWxvYWRDaGFydCIsImVycm9yIiwiY29uc29sZSIsImxvYWRJdGVtcyIsImdldEl0ZW0iLCJwcmVwYXJlSFRNTF9Mb2FkZWRJdGVtcyIsInNob3dPckhpZGVFbGVtZW50cyIsImh0bWwiLCJpZGVkbnRpZmllciIsImZvckVhY2giLCJpdGVtIiwiaXRlbUVsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJuYW1lSXRlbUNvbnRhaW5lciIsInNldEF0dHJpYnV0ZSIsImNsYXNzTGlzdCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJpbm5lclRleHQiLCJmaW5kSW5kZXgiLCJuYW1lIiwibmFtZUl0ZW0iLCJpZCIsImluZGV4IiwidmFsdWUiLCJjb2xvckl0ZW1Db250YWluZXIiLCJsYWJlbEZvck5hbWVJdGVtIiwiYXBwZW5kQ2hpbGQiLCJsYWJlbEZvckNvbG9ySXRlbSIsImNvbG9yIiwiY29sb3JJdGVtIiwidmFsdWVJdGVtQ29udGFpbmVyIiwidmFsdWVJdGVtIiwibGFiZWxGb3JWYWx1ZUl0ZW0iLCJyZW1vdmVCdXR0b24iLCJidXR0b25zQ29udGFpbmVyIiwidXBCdXR0b24iLCJmaWx0ZXIiLCJ0ZW1wIiwiZG93bkJ1dHRvbiIsImxlbmd0aCIsImFwcGVuZCIsInJlbW92ZUl0ZW0iLCJkZXN0cm95IiwiZGF0YXNldHMiLCJtYXAiLCJsYWJlbCIsInR5cGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJib3JkZXJDb2xvciIsImxvZyIsImhpZGUiLCJzaG93IiwiY2xpY2siLCJNYXRoIiwicmFuZG9tIiwic3Vic3RyaW5nIiwidG9TdHJpbmciLCJwdXNoIiwicmFuZENvbG9yIiwic29ydCIsImEiLCJiIiwi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QUFBc0MsRUFBQXRDLEtBQUEsQ0FBQSxFQUNKL0IsVUFBQSxFQU1JVyx3QkFBd0IsQ0FKaEMsQ0FBQSxFQUV3QmYsRUFBQSxZQUFZLEVBQUFnRSxNQUFLN0IsV0FBTTFCLE1BQUE4RCxLQUFBLFNBQUFDLEVBQUFDLEdBQUEsT0FBQUEsRUFBQXRDLE1BQUFxQyxFQUFBckMsS0FBQSxDQUFBLEVBQ3ZDL0IsVUFBVyxFQUNYVyx3QkFBeUIsQ0FDM0IsQ0FBQSxFQUdBZixFQUFBLGdCQUFvQixFQUFBZ0UsTUFBQSxXQUNaTyxJQUFnQkcsRUFBWHBELFNBQUtxRCxlQUFBLGFBQUEsRUFBc0JDLFVBQUEsV0FBQSxFQUFDSixFQUFBbEQsU0FBQUMsY0FBQSxHQUFBLEVBQ3ZDbkIsRUFBQUEsS0FBV3NFLEVBQ1gzRCxFQUFBQSxTQUFBQSxZQUNGeUQsRUFBQVIsTUFBQSxDQVVGLENBQUMsRUFMR25ELFVBQVciLCJmaWxlIjoiY3JlYXRlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCBsaXN0ID0gJCgnI2xpc3RfX2NvbnRhaW5lcicpO1xyXG5cclxubGV0IGl0ZW1zID0gW107XHJcblxyXG5jb25zdCBjdHhDcmVhdGUgPSAkKFwiI2NyZWF0ZUNoYXJ0XCIpO1xyXG5sZXQgbXlDaGFydENyZWF0ZSA9IG5ldyBDaGFydChjdHhDcmVhdGUsIHt9KTtcclxuXHJcbiQoJyNjcmVhdGVfX2J0bicpLmNsaWNrKCgpID0+IHtcclxuICAgIC8vIFNldCB2YWx1ZXMgZm9yIG5ldyBpdGVtXHJcbiAgICAgICAgbGV0IHJhbmRDb2xvciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxNjc3NzIxNSkudG9TdHJpbmcoMTYpO1xyXG4gICAgICAgIGxldCBpZGVkbnRpZmllciA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZyg3KTtcclxuXHJcbiAgICAvLyBDcmVhdGUgb2JqZWN0IGZvciBpdGVtXHJcbiAgICAgICAgbGV0IGl0ZW1PYmplY3QgPSB7XHJcbiAgICAgICAgICAgIGlkOiBpZGVkbnRpZmllcixcclxuICAgICAgICAgICAgbmFtZTogJ05ldyBpdGVtJyxcclxuICAgICAgICAgICAgY29sb3I6ICcjJytyYW5kQ29sb3IsXHJcbiAgICAgICAgICAgIHZhbHVlOiAwXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAvLyBBZGQgaXRlbSBvYmplY3QgdG8gaXRlbXMgYXJyYXlcclxuICAgICAgICBpdGVtcy5wdXNoKGl0ZW1PYmplY3QpO1xyXG5cclxuICAgIC8vIFByZXBhcmUgSFRNTCBmb3IgbmV3IGl0ZW1cclxuICAgICAgICBwcmVwYXJlSFRNTF9Mb2FkZWRJdGVtcygpO1xyXG5cclxuICAgIC8vIFNhdmUgaXRlbXMgdG8gbG9jYWwgc3RvcmFnZVxyXG4gICAgICAgIHNhdmVJdGVtcygpO1xyXG59KTtcclxuXHJcbi8vIFNhdmUgb3IgVXBkYXRlIGl0ZW1zIGluIGxvY2FsIHN0b3JhZ2VcclxuZnVuY3Rpb24gc2F2ZUl0ZW1zKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaXRlbXMnLCBKU09OLnN0cmluZ2lmeShpdGVtcykpO1xyXG4gICAgICAgIC8vIFJlbG9hZCBjaGFydFxyXG4gICAgICAgICAgICByZWxvYWRDaGFydCgpO1xyXG5cclxuICAgICAgICAvLyBTaG93IG9yIGhpZGUgZWxlbWVudHNcclxuICAgICAgICAgICAgc2hvd09ySGlkZUVsZW1lbnRzKCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG59ICAgXHJcblxyXG4vLyBMb2FkIGl0ZW1zIGZyb20gbG9jYWwgc3RvcmFnZVxyXG5mdW5jdGlvbiBsb2FkSXRlbXMoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGlmKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpdGVtcycpKSB7XHJcbiAgICAgICAgICAgIGl0ZW1zID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaXRlbXMnKSk7XHJcbiAgICAgICAgICAgIHByZXBhcmVIVE1MX0xvYWRlZEl0ZW1zKCk7XHJcbiAgICAgICAgICAgIC8vIFJlbG9hZCBjaGFydFxyXG4gICAgICAgICAgICAgICAgcmVsb2FkQ2hhcnQoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpdGVtcyA9IFtdO1xyXG4gICAgICAgICAgICBzaG93T3JIaWRlRWxlbWVudHMoKTtcclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBwcmVwYXJlSFRNTF9Mb2FkZWRJdGVtcygpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgbGlzdC5odG1sKCcnKTtcclxuXHJcbiAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgbGV0IGlkZWRudGlmaWVyID0gaXRlbS5pZDtcclxuXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBuZXcgaXRlbVxyXG4gICAgICAgICAgICAgICAgbGV0IGl0ZW1FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBpdGVtRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCBpZGVkbnRpZmllcik7XHJcbiAgICAgICAgICAgICAgICBpdGVtRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdkYXRhX19saXN0LWl0ZW0nKTtcclxuXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBuYW1lIGl0ZW0gY29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICBsZXQgbmFtZUl0ZW1Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbmFtZSBpdGVtIGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZUl0ZW1Db250YWluZXIuY2xhc3NMaXN0LmFkZCgnZGF0YV9fbGlzdC1pdGVtLW5hbWUnKTtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lSXRlbUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdkYXRhX19saXN0LWl0ZW0tc2V0dGluZycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuYW1lSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZUl0ZW0uc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQnKTtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lSXRlbS5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgaXRlbS5uYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lSXRlbS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IGl0ZW1zLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uaWQgPT09IGlkZWRudGlmaWVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXNbaW5kZXhdLm5hbWUgPSBuYW1lSXRlbS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUl0ZW1zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGxhYmVsIGZvciBuYW1lIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICBsZXQgbGFiZWxGb3JOYW1lSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxGb3JOYW1lSXRlbS5pbm5lclRleHQgPSAnTmFtZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxGb3JOYW1lSXRlbS5zZXRBdHRyaWJ1dGUoJ2ZvcicsIGlkZWRudGlmaWVyKTtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lSXRlbUNvbnRhaW5lci5hcHBlbmRDaGlsZChsYWJlbEZvck5hbWVJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lSXRlbUNvbnRhaW5lci5hcHBlbmRDaGlsZChuYW1lSXRlbSk7XHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgY29sb3IgaXRlbSBjb250YWluZXJcclxuICAgICAgICAgICAgICAgIGxldCBjb2xvckl0ZW1Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgY29sb3IgaXRlbSBpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9ySXRlbUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdkYXRhX19saXN0LWl0ZW0tY29sb3InKTtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvckl0ZW1Db250YWluZXIuY2xhc3NMaXN0LmFkZCgnZGF0YV9fbGlzdC1pdGVtLXNldHRpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY29sb3JJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvckl0ZW0uc2V0QXR0cmlidXRlKCd0eXBlJywgJ2NvbG9yJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3JJdGVtLnNldEF0dHJpYnV0ZSgndmFsdWUnLCBpdGVtLmNvbG9yKTtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvckl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBpdGVtcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmlkID09PSBpZGVkbnRpZmllcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zW2luZGV4XS5jb2xvciA9IGNvbG9ySXRlbS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUl0ZW1zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGxhYmVsIGZvciBjb2xvciBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxhYmVsRm9yQ29sb3JJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbEZvckNvbG9ySXRlbS5pbm5lclRleHQgPSAnQ29sb3InO1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsRm9yQ29sb3JJdGVtLnNldEF0dHJpYnV0ZSgnZm9yJywgaWRlZG50aWZpZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9ySXRlbUNvbnRhaW5lci5hcHBlbmRDaGlsZChsYWJlbEZvckNvbG9ySXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3JJdGVtQ29udGFpbmVyLmFwcGVuZENoaWxkKGNvbG9ySXRlbSk7XHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgdmFsdWUgaXRlbSBjb250YWluZXJcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWVJdGVtQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHZhbHVlIGl0ZW0gaW5wdXRcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZUl0ZW1Db250YWluZXIuY2xhc3NMaXN0LmFkZCgnZGF0YV9fbGlzdC1pdGVtLXZhbHVlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVJdGVtQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2RhdGFfX2xpc3QtaXRlbS1zZXR0aW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVJdGVtLnNldEF0dHJpYnV0ZSgndHlwZScsICdudW1iZXInKTtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZUl0ZW0uc2V0QXR0cmlidXRlKCd2YWx1ZScsIGl0ZW0udmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlSXRlbS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IGl0ZW1zLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uaWQgPT09IGlkZWRudGlmaWVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXNbaW5kZXhdLnZhbHVlID0gdmFsdWVJdGVtLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzYXZlSXRlbXMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbGFiZWwgZm9yIHZhbHVlIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICBsZXQgbGFiZWxGb3JWYWx1ZUl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsRm9yVmFsdWVJdGVtLmlubmVyVGV4dCA9ICdWYWx1ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxGb3JWYWx1ZUl0ZW0uc2V0QXR0cmlidXRlKCdmb3InLCBpZGVkbnRpZmllcik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVJdGVtQ29udGFpbmVyLmFwcGVuZENoaWxkKGxhYmVsRm9yVmFsdWVJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZUl0ZW1Db250YWluZXIuYXBwZW5kQ2hpbGQodmFsdWVJdGVtKTtcclxuXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBidXR0b25zIGNvbnRhaW5lclxyXG4gICAgICAgICAgICAgICAgbGV0IGJ1dHRvbnNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbnNDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnZGF0YV9fbGlzdC1pdGVtLWJ1dHRvbnMnKTtcclxuXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSByZW1vdmUgYnV0dG9uXHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHJlbW92ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2RhdGFfX2xpc3QtaXRlbS1yZW1vdmUnKTtcclxuICAgICAgICAgICAgICAgIHJlbW92ZUJ1dHRvbi5pbm5lclRleHQgPSAnWCc7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMgPSBpdGVtcy5maWx0ZXIoaXRlbSA9PiBpdGVtLmlkICE9PSBpZGVkbnRpZmllcik7XHJcbiAgICAgICAgICAgICAgICAgICAgc2F2ZUl0ZW1zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJlcGFyZUhUTUxfTG9hZGVkSXRlbXMoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uc0NvbnRhaW5lci5hcHBlbmRDaGlsZChyZW1vdmVCdXR0b24pO1xyXG5cclxuICAgICAgICAgICAgLy8gQ3JlYXRlIHVwIGJ1dHRvblxyXG5cclxuICAgICAgICAgICAgICAgIGxldCB1cEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgICAgICAgICAgdXBCdXR0b24uY2xhc3NMaXN0LmFkZCgnZGF0YV9fbGlzdC1pdGVtLXVwJyk7XHJcbiAgICAgICAgICAgICAgICB1cEJ1dHRvbi5pbm5lclRleHQgPSAnPDwnO1xyXG4gICAgICAgICAgICAgICAgdXBCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gaXRlbXMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gaWRlZG50aWZpZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRlbXAgPSBpdGVtc1tpbmRleCAtIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtc1tpbmRleCAtIDFdID0gaXRlbXNbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtc1tpbmRleF0gPSB0ZW1wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzYXZlSXRlbXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJlcGFyZUhUTUxfTG9hZGVkSXRlbXMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbnNDb250YWluZXIuYXBwZW5kQ2hpbGQodXBCdXR0b24pO1xyXG5cclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGRvd24gYnV0dG9uXHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGRvd25CdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICAgICAgICAgIGRvd25CdXR0b24uY2xhc3NMaXN0LmFkZCgnZGF0YV9fbGlzdC1pdGVtLWRvd24nKTtcclxuICAgICAgICAgICAgICAgIGRvd25CdXR0b24uaW5uZXJUZXh0ID0gJz4+JztcclxuICAgICAgICAgICAgICAgIGRvd25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gaXRlbXMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gaWRlZG50aWZpZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA8IGl0ZW1zLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRlbXAgPSBpdGVtc1tpbmRleCArIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtc1tpbmRleCArIDFdID0gaXRlbXNbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtc1tpbmRleF0gPSB0ZW1wOyAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUl0ZW1zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXBhcmVIVE1MX0xvYWRlZEl0ZW1zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBidXR0b25zQ29udGFpbmVyLmFwcGVuZENoaWxkKGRvd25CdXR0b24pO1xyXG5cclxuICAgICAgICAgICAgLy8gQWRkIGFsbCBlbGVtZW50cyB0byBpdGVtXHJcbiAgICAgICAgICAgICAgICBpdGVtRWxlbWVudC5hcHBlbmRDaGlsZChuYW1lSXRlbUNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgICAgICBpdGVtRWxlbWVudC5hcHBlbmRDaGlsZChjb2xvckl0ZW1Db250YWluZXIpO1xyXG4gICAgICAgICAgICAgICAgaXRlbUVsZW1lbnQuYXBwZW5kQ2hpbGQodmFsdWVJdGVtQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgICAgIGl0ZW1FbGVtZW50LmFwcGVuZENoaWxkKGJ1dHRvbnNDb250YWluZXIpO1xyXG5cclxuICAgICAgICAgICAgLy8gQWRkIGl0ZW0gdG8gbGlzdFxyXG4gICAgICAgICAgICAgICAgbGlzdC5hcHBlbmQoaXRlbUVsZW1lbnQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIENsZWFyIGl0ZW1zIGZyb20gbG9jYWwgc3RvcmFnZVxyXG4gICAgZnVuY3Rpb24gY2xlYXJJdGVtcygpIHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnaXRlbXMnKTtcclxuICAgICAgICBpdGVtcyA9IFtdO1xyXG4gICAgICAgIGxpc3QuaHRtbCgnJyk7XHJcbiAgICAgICAgLy8gUmVsb2FkIGNoYXJ0XHJcbiAgICAgICAgICAgIHJlbG9hZENoYXJ0KCk7XHJcbiAgICAgICAgLy8gU2hvdyBvciBoaWRlIGVsZW1lbnRzXHJcbiAgICAgICAgICAgIHNob3dPckhpZGVFbGVtZW50cygpO1xyXG4gICAgfVxyXG5cclxuICAgICQoJyNjbGVhcl9fYnRuJykuY2xpY2soKCkgPT4ge1xyXG4gICAgICAgIGNsZWFySXRlbXMoKTtcclxuICAgIH0pO1xyXG5cclxuLy8gUmVsb2FkIENoYXJ0XHJcbiAgICBmdW5jdGlvbiByZWxvYWRDaGFydCgpIHtcclxuICAgICAgICBpZihteUNoYXJ0Q3JlYXRlKSB7XHJcbiAgICAgICAgICAgIG15Q2hhcnRDcmVhdGUuZGVzdHJveSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgZGF0YXNldHMgPSBpdGVtcy5tYXAoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogaXRlbS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogW2l0ZW0udmFsdWVdLFxyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBpdGVtLmNvbG9yLFxyXG4gICAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6IGl0ZW0uY29sb3IsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbXlDaGFydENyZWF0ZSA9IG5ldyBDaGFydChjdHhDcmVhdGUsIHtcclxuICAgICAgICAgICAgdHlwZTogJ2JhcicsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGxhYmVsczogWycnXSxcclxuICAgICAgICAgICAgICAgIGRhdGFzZXRzOiBkYXRhc2V0c1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNob3dPckhpZGVFbGVtZW50cygpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtcy5sZW5ndGgpO1xyXG4gICAgICAgICAgICBpZihpdGVtcy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgJCgnI2NsZWFyX19idG4nKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcjYXNjX19idG4nKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcjZGVzY19fYnRuJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnI2Rvd25sb2FkX19idG4nKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcjY3JlYXRlQ2hhcnQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjY2xlYXJfX2J0bicpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICQoJyNhc2NfX2J0bicpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICQoJyNkZXNjX19idG4nKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAkKCcjZG93bmxvYWRfX2J0bicpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICQoJyNjcmVhdGVDaGFydCcpLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbi8vIFNvcnQgaXRlbXMgYnkgdmFsdWUgYXNjZW5kaW5nXHJcbiAgICAkKCcjYXNjX19idG4nKS5jbGljaygoKSA9PiB7XHJcbiAgICAgICAgaXRlbXMuc29ydCgoYSwgYikgPT4gYS52YWx1ZSAtIGIudmFsdWUpO1xyXG4gICAgICAgIHNhdmVJdGVtcygpO1xyXG4gICAgICAgIHByZXBhcmVIVE1MX0xvYWRlZEl0ZW1zKCk7XHJcbiAgICB9KTtcclxuXHJcbi8vIFNvcnQgaXRlbXMgYnkgdmFsdWUgZGVzY2VuZGluZ1xyXG4gICAgJCgnI2Rlc2NfX2J0bicpLmNsaWNrKCgpID0+IHtcclxuICAgICAgICBpdGVtcy5zb3J0KChhLCBiKSA9PiBiLnZhbHVlIC0gYS52YWx1ZSk7XHJcbiAgICAgICAgc2F2ZUl0ZW1zKCk7XHJcbiAgICAgICAgcHJlcGFyZUhUTUxfTG9hZGVkSXRlbXMoKTtcclxuICAgIH0pO1xyXG5cclxuLy8gRG93bmxvYWQgUE5HXHJcbiAgICAkKCcjZG93bmxvYWRfX2J0bicpLmNsaWNrKCgpID0+IHtcclxuICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NyZWF0ZUNoYXJ0Jyk7XHJcbiAgICAgICAgbGV0IGRhdGFVUkwgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTtcclxuICAgICAgICBsZXQgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgICAgICBhLmhyZWYgPSBkYXRhVVJMO1xyXG4gICAgICAgIGEuZG93bmxvYWQgPSAnY2hhcnQucG5nJztcclxuICAgICAgICBhLmNsaWNrKCk7XHJcbiAgICB9KTtcclxuXHJcblxyXG4vLyBMb2FkIGl0ZW1zIGZyb20gbG9jYWwgc3RvcmFnZVxyXG4gICAgbG9hZEl0ZW1zKCk7XHJcbiJdfQ==
