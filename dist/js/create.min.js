"use strict";var list=$("#list__container"),items=[],ctxCreate=$("#createChart"),myChartCreate=new Chart(ctxCreate,{});function saveItems(){try{localStorage.setItem("items",JSON.stringify(items)),reloadChart(),showOrHideElements()}catch(e){console.error(e)}}function loadItems(){try{(localStorage.getItem("items")?(items=JSON.parse(localStorage.getItem("items")),prepareHTML_ListItems(),reloadChart):(items=[],showOrHideElements))()}catch(e){console.error(e)}}function prepareHTML_ListItems(){try{list.html(""),items.forEach(function(e){var a=e.id,t=document.createElement("div"),n=(t.setAttribute("data-id",a),t.classList.add("data__list-item"),document.createElement("div")),i=(n.classList.add("data__list-item-name"),n.classList.add("data__list-item-setting"),document.createElement("input")),s=(i.setAttribute("type","text"),i.setAttribute("value",e.name),i.addEventListener("change",function(){var e=items.findIndex(function(e){return e.id===a});items[e].name=i.value,saveItems()}),document.createElement("label")),s=(s.innerText="Name",s.setAttribute("for",a),n.appendChild(s),n.appendChild(i),document.createElement("div")),r=(s.classList.add("data__list-item-color"),s.classList.add("data__list-item-setting"),document.createElement("input")),d=(r.setAttribute("type","color"),r.setAttribute("value",e.color),r.addEventListener("change",function(){var e=items.findIndex(function(e){return e.id===a});items[e].color=r.value,saveItems()}),document.createElement("label")),d=(d.innerText="Color",d.setAttribute("for",a),s.appendChild(d),s.appendChild(r),document.createElement("div")),l=(d.classList.add("data__list-item-value"),d.classList.add("data__list-item-setting"),document.createElement("input")),e=(l.setAttribute("type","number"),l.setAttribute("value",e.value),l.addEventListener("change",function(){var e=items.findIndex(function(e){return e.id===a});items[e].value=l.value,saveItems()}),document.createElement("label")),e=(e.innerText="Value",e.setAttribute("for",a),d.appendChild(e),d.appendChild(l),document.createElement("div")),c=(e.classList.add("data__list-item-buttons"),document.createElement("button")),c=(c.classList.add("data__list-item-remove"),c.innerText="X",c.addEventListener("click",function(){items=items.filter(function(e){return e.id!==a}),saveItems(),prepareHTML_ListItems()}),e.appendChild(c),document.createElement("button")),c=(c.classList.add("data__list-item-up"),c.innerText="<<",c.addEventListener("click",function(){var e,t=items.findIndex(function(e){return e.id===a});0<t&&(e=items[t-1],items[t-1]=items[t],items[t]=e,saveItems(),prepareHTML_ListItems())}),e.appendChild(c),document.createElement("button"));c.classList.add("data__list-item-down"),c.innerText=">>",c.addEventListener("click",function(){var e,t=items.findIndex(function(e){return e.id===a});t<items.length-1&&(e=items[t+1],items[t+1]=items[t],items[t]=e,saveItems(),prepareHTML_ListItems())}),e.appendChild(c),t.appendChild(n),t.appendChild(s),t.appendChild(d),t.appendChild(e),list.append(t)})}catch(e){console.error(e)}}function clearItems(){localStorage.removeItem("items"),items=[],list.html(""),reloadChart(),showOrHideElements()}function reloadChart(){myChartCreate&&myChartCreate.destroy();var e=items.map(function(e){return{label:e.name,data:[e.value],backgroundColor:e.color,borderColor:e.color}});myChartCreate=new Chart(ctxCreate,{type:"bar",data:{labels:[""],datasets:e}})}function showOrHideElements(){try{console.log(items.length),0==items.length?($("#clear__btn").hide(),$("#asc__btn").hide(),$("#desc__btn").hide(),$("#download__btn").hide(),$("#createChart").hide()):($("#clear__btn").show(),$("#asc__btn").show(),$("#desc__btn").show(),$("#download__btn").show(),$("#createChart").show())}catch(e){console.error(e)}}$("#create__btn").click(function(){var e=Math.floor(16777215*Math.random()).toString(16),t=Math.random().toString(36).substring(7);items.push({id:t,name:"New item",color:"#"+e,value:0}),prepareHTML_ListItems(),saveItems()}),$("#clear__btn").click(function(){clearItems()}),$("#asc__btn").click(function(){items.sort(function(e,t){return e.value-t.value}),saveItems(),prepareHTML_ListItems()}),$("#desc__btn").click(function(){items.sort(function(e,t){return t.value-e.value}),saveItems(),prepareHTML_ListItems()}),$("#download__btn").click(function(){var e=document.getElementById("createChart").toDataURL("image/png"),t=document.createElement("a");t.href=e,t.download="chart.png",t.click()}),loadItems();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNyZWF0ZS5qcyJdLCJuYW1lcyI6WyJsaXN0IiwiJCIsImN0eENyZWF0ZSIsIm15Q2hhcnRDcmVhdGUiLCJDaGFydCIsInNhdmVJdGVtcyIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwiaXRlbXMiLCJyZWxvYWRDaGFydCIsImVycm9yIiwiY29uc29sZSIsImxvYWRJdGVtcyIsImdldEl0ZW0iLCJwcmVwYXJlSFRNTF9MaXN0SXRlbXMiLCJzaG93T3JIaWRlRWxlbWVudHMiLCJodG1sIiwiaWRlZG50aWZpZXIiLCJmb3JFYWNoIiwiaXRlbSIsIml0ZW1FbGVtZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwibmFtZUl0ZW1Db250YWluZXIiLCJzZXRBdHRyaWJ1dGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwiaW5uZXJUZXh0IiwiZmluZEluZGV4IiwibmFtZSIsIm5hbWVJdGVtIiwiaWQiLCJpbmRleCIsInZhbHVlIiwiY29sb3JJdGVtQ29udGFpbmVyIiwibGFiZWxGb3JOYW1lSXRlbSIsImFwcGVuZENoaWxkIiwibGFiZWxGb3JDb2xvckl0ZW0iLCJjb2xvciIsImNvbG9ySXRlbSIsInZhbHVlSXRlbUNvbnRhaW5lciIsInZhbHVlSXRlbSIsImxhYmVsRm9yVmFsdWVJdGVtIiwicmVtb3ZlQnV0dG9uIiwiYnV0dG9uc0NvbnRhaW5lciIsInVwQnV0dG9uIiwiZmlsdGVyIiwidGVtcCIsImRvd25CdXR0b24iLCJsZW5ndGgiLCJhcHBlbmQiLCJyZW1vdmVJdGVtIiwiZGVzdHJveSIsImRhdGFzZXRzIiwibWFwIiwibGFiZWwiLCJ0eXBlIiwiYmFja2dyb3VuZENvbG9yIiwiYm9yZGVyQ29sb3IiLCJsb2ciLCJoaWRlIiwic2hvdyIsImNsaWNrIiwiTWF0aCIsInJhbmRvbSIsInN1YnN0cmluZyIsInRvU3RyaW5nIiwicHVzaCIsInJhbmRDb2xvciIsInNvcnQiLCJhIiwiYiIsImRh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QXNDLEVBQUF0QyxLQUFBLENBQUEsRUFDSi9CLFVBQUEsRUFNSVcsc0JBQXNCLENBSjlCLENBQUEsRUFFd0JmLEVBQUEsWUFBWSxFQUFBZ0UsTUFBSzdCLFdBQU0xQixNQUFBOEQsS0FBQSxTQUFBQyxFQUFBQyxHQUFBLE9BQUFBLEVBQUF0QyxNQUFBcUMsRUFBQXJDLEtBQUEsQ0FBQSxFQUN2Qy9CLFVBQVcsRUFDWFcsc0JBQXVCLENBQ3pCLENBQUEsRUFHQWYsRUFBQSxnQkFBb0IsRUFBQWdFLE1BQUEsV0FDWk8sSUFBZ0JHLEVBQVhwRCxTQUFLcUQsZUFBQSxhQUFBLEVBQXNCQyxVQUFBLFdBQUEsRUFBQ0osRUFBQWxELFNBQUFDLGNBQUEsR0FBQSxFQUN2Q25CLEVBQUFBLEtBQVdzRSxFQUNYM0QsRUFBQUEsU0FBQUEsWUFDRnlELEVBQUFSLE1BQUEsQ0FVRixDQUFDLEVBTEduRCxVQUFXIiwiZmlsZSI6ImNyZWF0ZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgbGlzdCA9ICQoJyNsaXN0X19jb250YWluZXInKTtcclxuXHJcbmxldCBpdGVtcyA9IFtdO1xyXG5cclxuY29uc3QgY3R4Q3JlYXRlID0gJChcIiNjcmVhdGVDaGFydFwiKTtcclxubGV0IG15Q2hhcnRDcmVhdGUgPSBuZXcgQ2hhcnQoY3R4Q3JlYXRlLCB7fSk7XHJcblxyXG4kKCcjY3JlYXRlX19idG4nKS5jbGljaygoKSA9PiB7XHJcbiAgICAvLyBTZXQgdmFsdWVzIGZvciBuZXcgaXRlbVxyXG4gICAgICAgIGxldCByYW5kQ29sb3IgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTY3NzcyMTUpLnRvU3RyaW5nKDE2KTtcclxuICAgICAgICBsZXQgaWRlZG50aWZpZXIgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoNyk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIG9iamVjdCBmb3IgaXRlbVxyXG4gICAgICAgIGxldCBpdGVtT2JqZWN0ID0ge1xyXG4gICAgICAgICAgICBpZDogaWRlZG50aWZpZXIsXHJcbiAgICAgICAgICAgIG5hbWU6ICdOZXcgaXRlbScsXHJcbiAgICAgICAgICAgIGNvbG9yOiAnIycrcmFuZENvbG9yLFxyXG4gICAgICAgICAgICB2YWx1ZTogMFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgLy8gQWRkIGl0ZW0gb2JqZWN0IHRvIGl0ZW1zIGFycmF5XHJcbiAgICAgICAgaXRlbXMucHVzaChpdGVtT2JqZWN0KTtcclxuXHJcbiAgICAvLyBQcmVwYXJlIEhUTUwgZm9yIG5ldyBpdGVtXHJcbiAgICAgICAgcHJlcGFyZUhUTUxfTGlzdEl0ZW1zKCk7XHJcblxyXG4gICAgLy8gU2F2ZSBpdGVtcyB0byBsb2NhbCBzdG9yYWdlXHJcbiAgICAgICAgc2F2ZUl0ZW1zKCk7XHJcbn0pO1xyXG5cclxuLy8gU2F2ZSBvciBVcGRhdGUgaXRlbXMgaW4gbG9jYWwgc3RvcmFnZVxyXG5mdW5jdGlvbiBzYXZlSXRlbXMoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdpdGVtcycsIEpTT04uc3RyaW5naWZ5KGl0ZW1zKSk7XHJcbiAgICAgICAgLy8gUmVsb2FkIGNoYXJ0XHJcbiAgICAgICAgICAgIHJlbG9hZENoYXJ0KCk7XHJcblxyXG4gICAgICAgIC8vIFNob3cgb3IgaGlkZSBlbGVtZW50c1xyXG4gICAgICAgICAgICBzaG93T3JIaWRlRWxlbWVudHMoKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbn0gICBcclxuXHJcbi8vIExvYWQgaXRlbXMgZnJvbSBsb2NhbCBzdG9yYWdlXHJcbmZ1bmN0aW9uIGxvYWRJdGVtcygpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgaWYobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2l0ZW1zJykpIHtcclxuICAgICAgICAgICAgaXRlbXMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpdGVtcycpKTtcclxuICAgICAgICAgICAgcHJlcGFyZUhUTUxfTGlzdEl0ZW1zKCk7XHJcbiAgICAgICAgICAgIC8vIFJlbG9hZCBjaGFydFxyXG4gICAgICAgICAgICAgICAgcmVsb2FkQ2hhcnQoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpdGVtcyA9IFtdO1xyXG4gICAgICAgICAgICBzaG93T3JIaWRlRWxlbWVudHMoKTtcclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBwcmVwYXJlSFRNTF9MaXN0SXRlbXMoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGxpc3QuaHRtbCgnJyk7XHJcblxyXG4gICAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBpZGVkbnRpZmllciA9IGl0ZW0uaWQ7XHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgbmV3IGl0ZW1cclxuICAgICAgICAgICAgICAgIGxldCBpdGVtRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgaXRlbUVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgaWRlZG50aWZpZXIpO1xyXG4gICAgICAgICAgICAgICAgaXRlbUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZGF0YV9fbGlzdC1pdGVtJyk7XHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgbmFtZSBpdGVtIGNvbnRhaW5lclxyXG4gICAgICAgICAgICAgICAgbGV0IG5hbWVJdGVtQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIG5hbWUgaXRlbSBpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWVJdGVtQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2RhdGFfX2xpc3QtaXRlbS1uYW1lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZUl0ZW1Db250YWluZXIuY2xhc3NMaXN0LmFkZCgnZGF0YV9fbGlzdC1pdGVtLXNldHRpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbmFtZUl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWVJdGVtLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZUl0ZW0uc2V0QXR0cmlidXRlKCd2YWx1ZScsIGl0ZW0ubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZUl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBpdGVtcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmlkID09PSBpZGVkbnRpZmllcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zW2luZGV4XS5uYW1lID0gbmFtZUl0ZW0udmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVJdGVtcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBsYWJlbCBmb3IgbmFtZSBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxhYmVsRm9yTmFtZUl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsRm9yTmFtZUl0ZW0uaW5uZXJUZXh0ID0gJ05hbWUnO1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsRm9yTmFtZUl0ZW0uc2V0QXR0cmlidXRlKCdmb3InLCBpZGVkbnRpZmllcik7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZUl0ZW1Db250YWluZXIuYXBwZW5kQ2hpbGQobGFiZWxGb3JOYW1lSXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZUl0ZW1Db250YWluZXIuYXBwZW5kQ2hpbGQobmFtZUl0ZW0pO1xyXG5cclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGNvbG9yIGl0ZW0gY29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICBsZXQgY29sb3JJdGVtQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGNvbG9yIGl0ZW0gaW5wdXRcclxuICAgICAgICAgICAgICAgICAgICBjb2xvckl0ZW1Db250YWluZXIuY2xhc3NMaXN0LmFkZCgnZGF0YV9fbGlzdC1pdGVtLWNvbG9yJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3JJdGVtQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2RhdGFfX2xpc3QtaXRlbS1zZXR0aW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbG9ySXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3JJdGVtLnNldEF0dHJpYnV0ZSgndHlwZScsICdjb2xvcicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9ySXRlbS5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgaXRlbS5jb2xvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3JJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gaXRlbXMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gaWRlZG50aWZpZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtc1tpbmRleF0uY29sb3IgPSBjb2xvckl0ZW0udmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVJdGVtcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBsYWJlbCBmb3IgY29sb3IgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBsYWJlbEZvckNvbG9ySXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxGb3JDb2xvckl0ZW0uaW5uZXJUZXh0ID0gJ0NvbG9yJztcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbEZvckNvbG9ySXRlbS5zZXRBdHRyaWJ1dGUoJ2ZvcicsIGlkZWRudGlmaWVyKTtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvckl0ZW1Db250YWluZXIuYXBwZW5kQ2hpbGQobGFiZWxGb3JDb2xvckl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9ySXRlbUNvbnRhaW5lci5hcHBlbmRDaGlsZChjb2xvckl0ZW0pO1xyXG5cclxuICAgICAgICAgICAgLy8gQ3JlYXRlIHZhbHVlIGl0ZW0gY29udGFpbmVyXHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlSXRlbUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB2YWx1ZSBpdGVtIGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVJdGVtQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2RhdGFfX2xpc3QtaXRlbS12YWx1ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlSXRlbUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdkYXRhX19saXN0LWl0ZW0tc2V0dGluZycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZUl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlSXRlbS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnbnVtYmVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVJdGVtLnNldEF0dHJpYnV0ZSgndmFsdWUnLCBpdGVtLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZUl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBpdGVtcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmlkID09PSBpZGVkbnRpZmllcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zW2luZGV4XS52YWx1ZSA9IHZhbHVlSXRlbS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUl0ZW1zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGxhYmVsIGZvciB2YWx1ZSBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxhYmVsRm9yVmFsdWVJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbEZvclZhbHVlSXRlbS5pbm5lclRleHQgPSAnVmFsdWUnO1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsRm9yVmFsdWVJdGVtLnNldEF0dHJpYnV0ZSgnZm9yJywgaWRlZG50aWZpZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlSXRlbUNvbnRhaW5lci5hcHBlbmRDaGlsZChsYWJlbEZvclZhbHVlSXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVJdGVtQ29udGFpbmVyLmFwcGVuZENoaWxkKHZhbHVlSXRlbSk7XHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgYnV0dG9ucyBjb250YWluZXJcclxuICAgICAgICAgICAgICAgIGxldCBidXR0b25zQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBidXR0b25zQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2RhdGFfX2xpc3QtaXRlbS1idXR0b25zJyk7XHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgcmVtb3ZlIGJ1dHRvblxyXG5cclxuICAgICAgICAgICAgICAgIGxldCByZW1vdmVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICAgICAgICAgIHJlbW92ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdkYXRhX19saXN0LWl0ZW0tcmVtb3ZlJyk7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVCdXR0b24uaW5uZXJUZXh0ID0gJ1gnO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zID0gaXRlbXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5pZCAhPT0gaWRlZG50aWZpZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNhdmVJdGVtcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHByZXBhcmVIVE1MX0xpc3RJdGVtcygpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBidXR0b25zQ29udGFpbmVyLmFwcGVuZENoaWxkKHJlbW92ZUJ1dHRvbik7XHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgdXAgYnV0dG9uXHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHVwQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgICAgICAgICB1cEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdkYXRhX19saXN0LWl0ZW0tdXAnKTtcclxuICAgICAgICAgICAgICAgIHVwQnV0dG9uLmlubmVyVGV4dCA9ICc8PCc7XHJcbiAgICAgICAgICAgICAgICB1cEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBpdGVtcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmlkID09PSBpZGVkbnRpZmllcik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGVtcCA9IGl0ZW1zW2luZGV4IC0gMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zW2luZGV4IC0gMV0gPSBpdGVtc1tpbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zW2luZGV4XSA9IHRlbXA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVJdGVtcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVwYXJlSFRNTF9MaXN0SXRlbXMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbnNDb250YWluZXIuYXBwZW5kQ2hpbGQodXBCdXR0b24pO1xyXG5cclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGRvd24gYnV0dG9uXHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGRvd25CdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICAgICAgICAgIGRvd25CdXR0b24uY2xhc3NMaXN0LmFkZCgnZGF0YV9fbGlzdC1pdGVtLWRvd24nKTtcclxuICAgICAgICAgICAgICAgIGRvd25CdXR0b24uaW5uZXJUZXh0ID0gJz4+JztcclxuICAgICAgICAgICAgICAgIGRvd25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gaXRlbXMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gaWRlZG50aWZpZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA8IGl0ZW1zLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRlbXAgPSBpdGVtc1tpbmRleCArIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtc1tpbmRleCArIDFdID0gaXRlbXNbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtc1tpbmRleF0gPSB0ZW1wOyAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUl0ZW1zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXBhcmVIVE1MX0xpc3RJdGVtcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uc0NvbnRhaW5lci5hcHBlbmRDaGlsZChkb3duQnV0dG9uKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBhbGwgZWxlbWVudHMgdG8gaXRlbVxyXG4gICAgICAgICAgICAgICAgaXRlbUVsZW1lbnQuYXBwZW5kQ2hpbGQobmFtZUl0ZW1Db250YWluZXIpO1xyXG4gICAgICAgICAgICAgICAgaXRlbUVsZW1lbnQuYXBwZW5kQ2hpbGQoY29sb3JJdGVtQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgICAgIGl0ZW1FbGVtZW50LmFwcGVuZENoaWxkKHZhbHVlSXRlbUNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgICAgICBpdGVtRWxlbWVudC5hcHBlbmRDaGlsZChidXR0b25zQ29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBpdGVtIHRvIGxpc3RcclxuICAgICAgICAgICAgICAgIGxpc3QuYXBwZW5kKGl0ZW1FbGVtZW50KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBDbGVhciBpdGVtcyBmcm9tIGxvY2FsIHN0b3JhZ2VcclxuICAgIGZ1bmN0aW9uIGNsZWFySXRlbXMoKSB7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2l0ZW1zJyk7XHJcbiAgICAgICAgaXRlbXMgPSBbXTtcclxuICAgICAgICBsaXN0Lmh0bWwoJycpO1xyXG4gICAgICAgIC8vIFJlbG9hZCBjaGFydFxyXG4gICAgICAgICAgICByZWxvYWRDaGFydCgpO1xyXG4gICAgICAgIC8vIFNob3cgb3IgaGlkZSBlbGVtZW50c1xyXG4gICAgICAgICAgICBzaG93T3JIaWRlRWxlbWVudHMoKTtcclxuICAgIH1cclxuXHJcbiAgICAkKCcjY2xlYXJfX2J0bicpLmNsaWNrKCgpID0+IHtcclxuICAgICAgICBjbGVhckl0ZW1zKCk7XHJcbiAgICB9KTtcclxuXHJcbi8vIFJlbG9hZCBDaGFydFxyXG4gICAgZnVuY3Rpb24gcmVsb2FkQ2hhcnQoKSB7XHJcbiAgICAgICAgaWYobXlDaGFydENyZWF0ZSkge1xyXG4gICAgICAgICAgICBteUNoYXJ0Q3JlYXRlLmRlc3Ryb3koKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGRhdGFzZXRzID0gaXRlbXMubWFwKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IGl0ZW0ubmFtZSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IFtpdGVtLnZhbHVlXSxcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogaXRlbS5jb2xvcixcclxuICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yOiBpdGVtLmNvbG9yLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG15Q2hhcnRDcmVhdGUgPSBuZXcgQ2hhcnQoY3R4Q3JlYXRlLCB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdiYXInLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbHM6IFsnJ10sXHJcbiAgICAgICAgICAgICAgICBkYXRhc2V0czogZGF0YXNldHNcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzaG93T3JIaWRlRWxlbWVudHMoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coaXRlbXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgaWYoaXRlbXMubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICQoJyNjbGVhcl9fYnRuJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnI2FzY19fYnRuJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnI2Rlc2NfX2J0bicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICQoJyNkb3dubG9hZF9fYnRuJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnI2NyZWF0ZUNoYXJ0JykuaGlkZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCgnI2NsZWFyX19idG4nKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAkKCcjYXNjX19idG4nKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAkKCcjZGVzY19fYnRuJykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgJCgnI2Rvd25sb2FkX19idG4nKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAkKCcjY3JlYXRlQ2hhcnQnKS5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4vLyBTb3J0IGl0ZW1zIGJ5IHZhbHVlIGFzY2VuZGluZ1xyXG4gICAgJCgnI2FzY19fYnRuJykuY2xpY2soKCkgPT4ge1xyXG4gICAgICAgIGl0ZW1zLnNvcnQoKGEsIGIpID0+IGEudmFsdWUgLSBiLnZhbHVlKTtcclxuICAgICAgICBzYXZlSXRlbXMoKTtcclxuICAgICAgICBwcmVwYXJlSFRNTF9MaXN0SXRlbXMoKTtcclxuICAgIH0pO1xyXG5cclxuLy8gU29ydCBpdGVtcyBieSB2YWx1ZSBkZXNjZW5kaW5nXHJcbiAgICAkKCcjZGVzY19fYnRuJykuY2xpY2soKCkgPT4ge1xyXG4gICAgICAgIGl0ZW1zLnNvcnQoKGEsIGIpID0+IGIudmFsdWUgLSBhLnZhbHVlKTtcclxuICAgICAgICBzYXZlSXRlbXMoKTtcclxuICAgICAgICBwcmVwYXJlSFRNTF9MaXN0SXRlbXMoKTtcclxuICAgIH0pO1xyXG5cclxuLy8gRG93bmxvYWQgUE5HXHJcbiAgICAkKCcjZG93bmxvYWRfX2J0bicpLmNsaWNrKCgpID0+IHtcclxuICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NyZWF0ZUNoYXJ0Jyk7XHJcbiAgICAgICAgbGV0IGRhdGFVUkwgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTtcclxuICAgICAgICBsZXQgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgICAgICBhLmhyZWYgPSBkYXRhVVJMO1xyXG4gICAgICAgIGEuZG93bmxvYWQgPSAnY2hhcnQucG5nJztcclxuICAgICAgICBhLmNsaWNrKCk7XHJcbiAgICB9KTtcclxuXHJcblxyXG4vLyBMb2FkIGl0ZW1zIGZyb20gbG9jYWwgc3RvcmFnZVxyXG4gICAgbG9hZEl0ZW1zKCk7XHJcbiJdfQ==
